{% extends "app_base.html" %}

{% block page_title %}
    Cálculo de Curvas Hidrostáticas
{% endblock %}

{% block app_content %}
<div class="hydro-grid-container">
    
    <div class="quadrant quadrant-a1">
        <h4><i class="fa-solid fa-keyboard"></i> Parâmetros de Cálculo</h4>
        <hr>
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            
            <div class="form-group">{{ form.vessel.label }} {{ form.vessel(class="form-control") }}</div>

            <div class="form-row" style="display: flex; gap: 15px;">
                <div class="form-group" style="flex:1;">{{ form.calado_min.label }} {{ form.calado_min(class="form-control", step="any", placeholder="Ex: 0.0") }}</div>
                <div class="form-group" style="flex:1;">{{ form.calado_max.label }} {{ form.calado_max(class="form-control", step="any", placeholder="Ex: 4.0") }}</div>
            </div>
            <hr>
            {% for subfield in form.calc_method %}
                <div class="calc-option">
                    {{ subfield }} {{ subfield.label }}
                    {% if subfield.data == 'numero' %}
                        {{ form.num_calados(class="form-control", step="1.0", placeholder="Ex: 15.0") }}
                    {% elif subfield.data == 'incremento' %}
                        {{ form.inc_calados(class="form-control", step="any", placeholder="Ex: 0.5") }}
                    {% elif subfield.data == 'manual' %}
                        {{ form.lista_calados(class="form-control", placeholder="Ex: 0.5; 1.0; 1.5; 2.0") }}
                    {% endif %}
                </div>
            {% endfor %}
            <hr>
            <div class="form-row" style="display: flex; gap: 15px;">
                <div class="form-group" style="flex:1;">{{ form.metodo_interp.label }} {{ form.metodo_interp(class="form-control") }}</div>
                <div class="form-group" style="flex:1;">{{ form.densidade.label }} {{ form.densidade(class="form-control", step="any") }}</div>
            </div>
            <div class="form-group" style="margin-top: 20px;">
                {{ form.submit(class="btn") }}
            </div>
        </form>
    </div>

    <div class="quadrant quadrant-a2">
        <h4><i class="fa-solid fa-cube"></i> Visualização 3D do Casco</h4>
        <hr>
        <div id="plot-container">
            {% if plot_html %}
                {{ plot_html | safe }}
            {% else %}
                <div class="placeholder">A visualização aparecerá aqui após o cálculo.</div>
            {% endif %}
        </div>
    </div>

    <div class="quadrant quadrant-b12">
        <h4><i class="fa-solid fa-table"></i> Tabela de Resultados</h4>
        <hr>
        {% if resultados_html %}
            <div class="table-responsive">
                {{ resultados_html | safe }}
            </div>
        {% else %}
            <div class="placeholder">A tabela de resultados aparecerá aqui.</div>
        {% endif %}
    </div>

</div> 
{% endblock %}